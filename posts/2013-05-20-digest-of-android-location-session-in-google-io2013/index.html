<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google I/O 2013 の Android Location セッションまとめ</title>
    <meta name="description" content="Try and try again">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Experiments Never Fail">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Experiments Never Fail">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">Experiments Never Fail</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/">Home</a></li>
        <li class="nav-item"><a href="/posts/">Archive</a></li>
        <li class="nav-item"><a href="/about/">About Me</a></li>
      </ul>
    </header>

    <main class="tmpl-post">

      <!-- Delete this message 
      <div class="warning">
        <ol>
          <li>Edit the <code>_data/metadata.json</code> with your blog’s information.</li>
          <li>(Optional) Edit <code>.eleventy.js</code> with your <a href="https://www.11ty.dev/docs/config/">configuration preferences</a>.</li>
          <li>Delete this message from <code>_includes/layouts/base.njk</code>.</li>
        </ol>
        <p><em>This is an <a href="https://www.11ty.dev/">Eleventy project</a> created from the <a href="https://github.com/11ty/eleventy-base-blog"><code>eleventy-base-blog</code> repo</a>.</em></p>
      </div>
      Stop deleting -->

      <h1>Google I/O 2013 の Android Location セッションまとめ</h1>

<p>これは、<a href="http://www.youtube.com/watch?v=URcVZybzMUI">Google I/O 2013 - Beyond the Blue Dot: New Features in Android Location - YouTube</a> から主要な部分を切り出して勝手な解説を加えたものです。</p>
<!--more-->
<h2 id="%E6%99%82%E9%96%93%E3%81%8C%E3%81%AA%E3%81%84%E4%BA%BA%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB">時間がない人のために <a class="direct-link" href="#%E6%99%82%E9%96%93%E3%81%8C%E3%81%AA%E3%81%84%E4%BA%BA%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB">#</a></h2>
<p>このセッションは、Android に追加された「Fused Location Provider」「Geofencing」「Activity Recognition」に関するお話です。</p>
<p>これらの３つのデモだけ見れば、だいたい「すげー」ってなるかと。</p>
<ul>
<li>
<p><a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=URcVZybzMUI#t=733s">Fused Location Provider のデモ</a></p>
</li>
<li>
<p><a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=URcVZybzMUI#t=1195s">Geofencing のデモ</a></p>
</li>
<li>
<p><a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=URcVZybzMUI#t=1661s">Activity Recognition のデモ</a></p>
</li>
</ul>
<p>で、これらの機能は Google Play services として提供されるので、新しい端末を待たなくても<strong>今日から使えます</strong>よ、と。</p>
<h2 id="%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB">はじめに <a class="direct-link" href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB">#</a></h2>
<p>タイトルは「Beyond the Blue Dot」、Blue Dot とは…デモを観たら分かります。</p>
<p><img src="/img/posts/google_io_android_location_001.png" alt="&quot;1&quot;"></p>
<p>Intro&amp;Closing 担当の Waleed さん(右)と、Deep Dive してくれる Jaikumar さん(左)</p>
<p><img src="/img/posts/google_io_android_location_002.png" alt="2"></p>
<p>基本として、各種測位技術の比較表を。</p>
<p><img src="/img/posts/google_io_android_location_008.png" alt="8"></p>
<h2 id="fused-location-provider">Fused Location Provider <a class="direct-link" href="#fused-location-provider">#</a></h2>
<p>Intro を早々に飛ばして、ここから各機能の詳細説明。</p>
<p>まず、現在の Location 周りの構成図。これが…</p>
<p><img src="/img/posts/google_io_android_location_009.png" alt="9"></p>
<p>こうなる。今までのレイヤの上に Google Play-services として構成される。</p>
<p><img src="/img/posts/google_io_android_location_017.png" alt="17"></p>
<p>さあてお待ちかねのデモ。</p>
<p>まずは、実際の経路(緑) vs GPS(黄色)</p>
<p>画像だけだと若干分かりづらいけど、屋内はすっ飛ばされてる。</p>
<p><img src="/img/posts/google_io_android_location_018.png" alt="18"></p>
<p>次、緑 vs WiFi測位(赤)</p>
<p>もう、カックカクなのであります。</p>
<p><img src="/img/posts/google_io_android_location_019.png" alt="19"></p>
<p>そして、緑 vs Fused Location Provider(青 the Blue Dot)</p>
<p>屋外は GPS によるスムースな軌跡、屋内は WiFi＋センサーによる自律測位で十分に滑らか。入出、退出時の切り替えも自動で行われる。(拍手！)</p>
<p><img src="/img/posts/google_io_android_location_020.png" alt="20"></p>
<p>使い方。</p>
<p><a href="http://developer.android.com/reference/com/google/android/gms/location/LocationClient.html">LocationClient</a> というのが増えてるので、それを使います。</p>
<p><code>connect</code> した後は、<code>LocationListener</code> が使えます。(注:<code>android.location.LocationListener</code> ではなく新しい <code>com.google.android.gms.location.LocationListener</code> でした)</p>
<p><img src="/img/posts/google_io_android_location_021.png" alt="21"></p>
<p><img src="/img/posts/google_io_android_location_022.png" alt="22"></p>
<p>[setPriority](<a href="http://developer.android.com/reference/com/google/android/gms/location/LocationRequest.html#setPriority(int)">http://developer.android.com/reference/com/google/android/gms/location/LocationRequest.html#setPriority(int)</a> で電池消費と精度をコントロールできるとのこと。</p>
<p><img src="/img/posts/google_io_android_location_024.png" alt="24"></p>
<h2 id="geofencing">Geofencing <a class="direct-link" href="#geofencing">#</a></h2>
<p>次のトピック、ジオフェンシング。</p>
<p>さっそくデモから。</p>
<p>ジオフェンスが２つ仕掛けてあって、自車がフェンス内に入ると色が変わるというもの。</p>
<p><img src="/img/posts/google_io_android_location_026.png" alt="26"></p>
<p>使い方。</p>
<p>同じく <code>LocationClient</code> から。<br>
結果は IntentService で受け取ります。</p>
<p><img src="/img/posts/google_io_android_location_028.png" alt="28"></p>
<p>そして嬉しいのがコレ。</p>
<p>消費電力が今までの 1/3 になってるとのことです。<br>
実は、ジオフェンシングの機能自体は [addProximityAlert](<a href="http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert">http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert</a>(double, double, float, long, android.app.PendingIntent) という形で既存だったのです(存在は知ってたが使ったこと無い)。</p>
<p>ユーザーの大雑把な場所や、現在の状態(歩いてるのか留まっているのか)やら、ハードウェアに直接処理させているので実現できた、とか言ってるみたいです。</p>
<p><img src="/img/posts/google_io_android_location_030.png" alt="30"></p>
<h2 id="activity-recognition">Activity Recognition <a class="direct-link" href="#activity-recognition">#</a></h2>
<p>最後のトピック、行動(状態)認識。</p>
<p>乗り物、徒歩、留まってる、自転車 を判別できます。</p>
<p><img src="/img/posts/google_io_android_location_032.png" alt="32"></p>
<p>これはライブデモ。<br>
自転車と認識されているのは…</p>
<p><img src="/img/posts/google_io_android_location_040.png" alt="40"></p>
<p>…マークさんの実演でしたー。(会場ここが一番盛り上がってた)</p>
<p><img src="/img/posts/google_io_android_location_041.png" alt="41"></p>
<p>そして使い方、<br>
<a href="http://developer.android.com/reference/com/google/android/gms/location/ActivityRecognitionClient.html">ActivityRecognitionClient</a> というのを使います。<br>
これは早速使ってみたのでこちらもご参考に。</p>
<ul>
<li><a href="http://amay077.github.io/blog/2013/05/18/getting-started-activity-recognition/">Google I/O 2013 で発表された行動認識(Activity Recognition)を使ってみる - Experiments Never Fail</a></li>
</ul>
<p><img src="/img/posts/google_io_android_location_043.png" alt="43"></p>
<p><img src="/img/posts/google_io_android_location_044.png" alt="44"></p>
<h2 id="%E3%81%BE%E3%81%A8%E3%82%81">まとめ <a class="direct-link" href="#%E3%81%BE%E3%81%A8%E3%82%81">#</a></h2>
<p>Waleed さんに戻ってまとめなど。</p>
<p>Google Play-services で提供してるから、使うなら？「今でしょ！」(言ってません)。<br>
これからも、消費電力・精度・使える場所(?) を改良していくぜい、とのこと。</p>
<p><img src="/img/posts/google_io_android_location_049.png" alt="49"></p>
<p>どうもありがとうございました。</p>
<p><img src="/img/posts/google_io_android_location_050.png" alt="50"></p>
<h2 id="%E9%9B%91%E6%84%9F">雑感 <a class="direct-link" href="#%E9%9B%91%E6%84%9F">#</a></h2>
<p>Fused Location Provider(GPS+WiFi+自律測位)は、カーナビ(GPS+自律測位)では普通に行われているものの、あちらは道路の上という縛りがあるのに対し、こちらはフリーダムな移動を処理しなければならないのですが、実用レベルの API を、誰でも使える形で提供してくる Google さん怖すぎ。</p>
<p>国内でも大学とかベンチャーが頑張って屋内測位とか行動認識技術開発してるので、ぜひがんばってください。</p>
<p>「なぜ Google Play-services で提供するのか？」に:</p>
<ul>
<li>既存デバイスにも対応できる</li>
<li>短いサイクルでリリースできる</li>
</ul>
<p>などのメリットを説明していましたが、その後ツイッターで、</p>
<blockquote class="twitter-tweet" data-conversation="none" lang="ja"><p>@<a href="https://twitter.com/amay077">amay077</a> おおー、参考になりました。ありがとうございます。ところで、これGooglePlayクラスのしただったのね。業務用のタブレットやスマホだとGooglePlay使えないから、ちょっと残念。</p>&mdash; new hirofumi hayashiさん (@picaosgeo) <a href="https://twitter.com/picaosgeo/status/335587102043549696">2013年5月18日</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>というやりとりをして気づきました。Google Play-services って「(オープンソースとしての)Android」じゃないのねーと(まあこれほどの技術の内部を公開なんて普通に考えてもありえない話ですが)。</p>
<p><strong>「Google Play-services が使えない端末では利用できない」</strong> というのは割と盲点になりそうです(Kindle もダメだよね、たぶん。しかしエミュレータですら使えないのは何とかして欲しい)。</p>
<p><a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20130321/464924/">Chrome との統合がうわさされる Android</a> ですが、Android の名を冠していない Google Play-services が充実していくのは、その流れなのかも知れませんね。</p>


published at <time class="postlist-date" datetime="2013-05-20">20 May 2013</time>

tags: 

  <a href="/tags/Android/" class="post-tag">Android</a>
  <a href="/tags/GoogleMapsAPI/" class="post-tag">GoogleMapsAPI</a>

<hr>
<ul><li>Next: <a href="/posts/2013-05-23-getting-started-fused-location-provider/">Google I/O 2013 で発表された Fused Location Provider を使ってみる</a></li><li>Previous: <a href="/posts/2013-05-18-getting-started-activity-recognition/">Google I/O 2013 で発表された行動認識(Activity Recognition)を使ってみる</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /posts/2013-05-20-digest-of-android-location-session-in-google-io2013/ -->
  </body>
</html>
